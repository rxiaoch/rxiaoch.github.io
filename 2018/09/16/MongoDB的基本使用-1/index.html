<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.1" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.1">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.1" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.4.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="- -     MySQL MongoDB   表 集合   行 文档   列 字段   joins 嵌入文档或者链接    1. 安装1.1. 安装1sudo pacman -S mongodb 1.2. 启动&amp;amp;停止启动： 123sudo systemctl start mongodb停止：sudo systemctl stop mongodb 开机启动： 1sudo system">
<meta name="keywords" content="MongoDB">
<meta property="og:type" content="article">
<meta property="og:title" content="MongoDB的基本使用（1）">
<meta property="og:url" content="http://yoursite.com/2018/09/16/MongoDB的基本使用-1/index.html">
<meta property="og:site_name" content="淡泊明志">
<meta property="og:description" content="- -     MySQL MongoDB   表 集合   行 文档   列 字段   joins 嵌入文档或者链接    1. 安装1.1. 安装1sudo pacman -S mongodb 1.2. 启动&amp;amp;停止启动： 123sudo systemctl start mongodb停止：sudo systemctl stop mongodb 开机启动： 1sudo system">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-02-26T05:38:59.984Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MongoDB的基本使用（1）">
<meta name="twitter:description" content="- -     MySQL MongoDB   表 集合   行 文档   列 字段   joins 嵌入文档或者链接    1. 安装1.1. 安装1sudo pacman -S mongodb 1.2. 启动&amp;amp;停止启动： 123sudo systemctl start mongodb停止：sudo systemctl stop mongodb 开机启动： 1sudo system">






  <link rel="canonical" href="http://yoursite.com/2018/09/16/MongoDB的基本使用-1/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>MongoDB的基本使用（1） | 淡泊明志</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">淡泊明志</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/16/MongoDB的基本使用-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="宁静致远">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="淡泊明志">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">MongoDB的基本使用（1）
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-16 21:01:06" itemprop="dateCreated datePublished" datetime="2018-09-16T21:01:06+08:00">2018-09-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-26 13:38:59" itemprop="dateModified" datetime="2019-02-26T13:38:59+08:00">2019-02-26</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <table>
<thead>
<tr>
<th>-</th>
<th>-</th>
</tr>
</thead>
<tbody>
<tr>
<td>MySQL</td>
<td>MongoDB</td>
</tr>
<tr>
<td>表</td>
<td>集合</td>
</tr>
<tr>
<td>行</td>
<td>文档</td>
</tr>
<tr>
<td>列</td>
<td>字段</td>
</tr>
<tr>
<td>joins</td>
<td>嵌入文档或者链接</td>
</tr>
</tbody>
</table>
<h1 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h1><h2 id="1-1-安装"><a href="#1-1-安装" class="headerlink" title="1.1. 安装"></a>1.1. 安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S mongodb</span><br></pre></td></tr></table></figure>
<h2 id="1-2-启动-amp-停止"><a href="#1-2-启动-amp-停止" class="headerlink" title="1.2. 启动&amp;停止"></a>1.2. 启动&amp;停止</h2><p><strong>启动：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start mongodb</span><br><span class="line">停止：</span><br><span class="line">sudo systemctl stop mongodb</span><br></pre></td></tr></table></figure>
<p><strong>开机启动：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable mongodb</span><br></pre></td></tr></table></figure>
<p>通过检查<code>/var/log/mongodb/mongod.log</code>日志文件的内容来验证mongod进程是否启动成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2018-09-17T09:07:11.742+0800 I NETWORK  [initandlisten] waiting for connections on port 27017</span><br></pre></td></tr></table></figure>
<h1 id="2-基本使用"><a href="#2-基本使用" class="headerlink" title="2. 基本使用"></a>2. 基本使用</h1><h2 id="2-1-连接数据库"><a href="#2-1-连接数据库" class="headerlink" title="2.1. 连接数据库"></a>2.1. 连接数据库</h2><p>使用mongo命令连接mongodb</p>
<p><strong>连接无认证的实例</strong></p>
<ol>
<li><p>连接本地默认端口（27017）的MongoDB实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo</span><br></pre></td></tr></table></figure>
</li>
<li><p>连接本地非默认端口的MongoDB实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo --port 28015</span><br></pre></td></tr></table></figure>
</li>
<li><p>连接远程主机上的MongoDB实例</p>
<p>为了明确的指定主机名和端口</p>
<ul>
<li>通过指定一个连接字符串，例如：</li>
</ul>
</li>
</ol>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo mongodb://mongodb0.example.com:28015</span><br></pre></td></tr></table></figure>
<ul>
<li>使用命令行选项<code>--host &lt;host&gt;:&lt;port&gt;</code>, 例如：</li>
</ul>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo --host mongodb0.example.com:28015</span><br></pre></td></tr></table></figure>
<ul>
<li>使用命令行选项<code>--host &lt;host&gt;</code> 和<code>--port &lt;port&gt;</code>, 例如：</li>
</ul>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo --host mongodb0.example.com --port 28015</span><br></pre></td></tr></table></figure>
<p><strong>连接带认证的实例</strong></p>
<ul>
<li>你在连接字符串中指定用户名，认证数据库和可选的密码，例如：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo --host mongodb://alice@mongodb0.examples.com:28015/?authSource=admin</span><br></pre></td></tr></table></figure>
<ul>
<li>你也可以使用命令行选项<code>--username &lt;username&gt;</code>和<code>--password</code>–authenticationDatabase <dbname>`，例如：</dbname></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo --username alice --password --authenticationDatabase admin --host mongodb0.examples.com --port 28015</span><br></pre></td></tr></table></figure>
<p><strong>连接到MongoDB的副本集</strong></p>
<ol>
<li><p>你可以在连接字符串中指定副本集的名称和成员，例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo mongodb://mongodb0.example.com.local:27017,mongodb1.example.com.local:27017/?replicaSet=replA</span><br></pre></td></tr></table></figure>
<p>你可以可以使用DNS种子列表连接格式，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo &quot;mongodb+srv://server.example.com/&quot;</span><br></pre></td></tr></table></figure>
<p>使用+ srv连接字符串自动将ssl选项设置为true以进行连接。</p>
</li>
</ol>
<ol start="2">
<li><p>你也可以通过命令行选项<code>--host &lt;replica_set_name&gt;/&lt;host1&gt;:&lt;port1&gt;, &lt;host2&gt;/&lt;port2&gt;</code>，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo --host replA/mongodb0.example.com.local:27017,mongodb1.example.com.local:27017</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="2-2-创建数据库"><a href="#2-2-创建数据库" class="headerlink" title="2.2. 创建数据库"></a>2.2. 创建数据库</h2><p>使用命令<code>use test</code>：切换数据库，可以切换到一个不存在的数据库，首次在数据库中存储数据时，例如通过创建集合，MongoDB会创建数据库就能创建一个数据库test, 之后需要创建一个collection, 否则会被自动删除</p>
<blockquote>
<p>use test<br>db.createCollection(“test_coll”)</p>
</blockquote>
<h2 id="2-3-创建用户"><a href="#2-3-创建用户" class="headerlink" title="2.3. 创建用户"></a>2.3. 创建用户</h2><ul>
<li><p>查看全局所有账户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.system.users.find().pretty()</span><br></pre></td></tr></table></figure>
</li>
<li><p>先给mongodb自带的collection admin 创建一个用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; use admin</span><br><span class="line">&gt; db.createUser(</span><br><span class="line">   &#123;</span><br><span class="line">     user: &quot;admin&quot;,</span><br><span class="line">     pwd: &quot;123456&quot;,</span><br><span class="line">     roles: [ &#123; role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; &#125;,</span><br><span class="line">              &#123; role: &quot;dbAdminAnyDatabase&quot;, db: &quot;admin&quot; &#125;]</span><br><span class="line">   &#125;</span><br><span class="line"> )</span><br></pre></td></tr></table></figure>
</li>
<li><p>为自己创建的库新建用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; use test</span><br><span class="line">&gt; db.createCollection(&quot;test_coll&quot;)</span><br><span class="line">&gt; db.createUser(</span><br><span class="line">    &#123;</span><br><span class="line">        user:&apos;osr_sys_admin&apos;,</span><br><span class="line">        pwd:&apos;123456&apos;,</span><br><span class="line">        roles:[&#123;role:&apos;readWrite&apos;, db:&apos;osr_sys&apos;&#125;]</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新一个库的用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; use test</span><br><span class="line">&gt; db.updateUser(</span><br><span class="line">    &quot;dba&quot;,</span><br><span class="line">    &#123;</span><br><span class="line">     roles : [ &#123; role: &quot;dbAdminAnyDatabase&quot;, db: &quot;admin&quot; &#125;,</span><br><span class="line">                &#123; role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>数据库个角色role说明</strong></p>
<p>Built-In Roles(内置角色)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. 数据库用户角色：read、readWrite;</span><br><span class="line">2. 数据库管理角色：dbAdmin、dbOwner、userAdmin；</span><br><span class="line">3. 集群管理角色：clusterAdmin、clusterManager、clusterMonitor、hostManager；</span><br><span class="line">4. 备份恢复角色：backup、restore；</span><br><span class="line">5. 所有数据库角色：readAnyDatabase、readWriteAnyDatabase、userAdminAnyDatabase、dbAdminAnyDatabase</span><br><span class="line">6. 超级用户角色：root</span><br><span class="line">// 这里还有几个角色间接或直接提供了系统超级用户的访问（dbOwner 、userAdmin、userAdminAnyDatabase）</span><br><span class="line">7. 内部角色：__system</span><br></pre></td></tr></table></figure>
<p>说明：</p>
<blockquote>
<p> Read：允许用户读取指定数据库</p>
<pre><code>readWrite：允许用户读写指定数据库
dbAdmin：允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile
userAdmin：允许用户向system.users集合写入，可以找指定数据库里创建、删除和管理用户
clusterAdmin：只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限。
readAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的读权限
readWriteAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的读写权限
userAdminAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的userAdmin权限
dbAdminAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限。
root：只在admin数据库中可用。超级账号，超级权限
</code></pre></blockquote>
</li>
</ul>
<h2 id="2-4-文档操作"><a href="#2-4-文档操作" class="headerlink" title="2.4. 文档操作"></a>2.4. 文档操作</h2><h3 id="2-4-1-插入文档"><a href="#2-4-1-插入文档" class="headerlink" title="2.4.1. 插入文档"></a>2.4.1. 插入文档</h3><ul>
<li><p><code>db.collection.insertMany()</code>：通过传入一个文档的数组，可以将多个文档插入到集合中，执行后将返回一个包含新插入文档_id字段值的一个文档，例如</p>
<blockquote>
<p>db.inventory.insertMany([<br>   // MongoDB adds the _id field with an ObjectId if _id is not present<br>   { item: “paper”, qty: 100, status: “D”,</p>
<pre><code>size: { h: 8.5, w: 11, uom: &quot;in&quot; }, tags: [ &quot;red&quot;, &quot;blank&quot;, &quot;plain&quot; ] },
</code></pre><p>   { item: “planner”, qty: 75, status: “D”,</p>
<pre><code>size: { h: 22.85, w: 30, uom: &quot;cm&quot; }, tags: [ &quot;blank&quot;, &quot;red&quot;              ] }
</code></pre><p>]);<br>返回结果：<br>{</p>
<pre><code>&quot;acknowledged&quot; : true,
&quot;insertedIds&quot; : [
    ObjectId(&quot;5b9f683c0d8dc94502ef65bd&quot;),
    ObjectId(&quot;5b9f683c0d8dc94502ef65be&quot;),
]
</code></pre><p>}</p>
</blockquote>
</li>
<li><p><code>db.collection.insertOne()</code>：插入单个文档，例如：</p>
</li>
</ul>
<blockquote>
<p>db.inventory.insertOne({“item” : “jox”, “qtx” : 30, “status” : “D”, “size” : { “h” : 20, “w” : 31, “uom” : “cm” }, “tags” : [ “white”, “blue” ]})<br>返回</p>
<p>{<br>“acknowledged” : true,<br>“insertedId” : ObjectId(“5b9f69840d8dc94502ef65c2”)<br>}</p>
</blockquote>
<h3 id="2-4-2-查询文档"><a href="#2-4-2-查询文档" class="headerlink" title="2.4.2. 查询文档"></a>2.4.2. 查询文档</h3><ul>
<li><p>查询所有的文档：通过传入一个空查询筛选文档，查询集合中的所有文档，例如：</p>
<blockquote>
<p>查询所有的文档</p>
<p>db.inventory.find({})或db.inventory.find()<br>通过传入查询筛选文档，来匹配对应的文档<br>db.inventory.find( { status: “D” } )</p>
</blockquote>
</li>
<li><p>匹配内嵌的文档：匹配整个嵌入式文档的需要指定的<value>文档的完全匹配，包括<strong>字段顺序</strong>，例如：</value></p>
<blockquote>
<p> db.inventory.find( { size: { h: 14, w: 21, uom: “cm” } } )<br>{ “_id” : ObjectId(“5b9f683c0d8dc94502ef65bd”), “item” : “journal”, “qty” : 25, “status” : “A”, “size” : { “h” : 14, “w” : 21, “uom” : “cm” }, “tags” : [ “blank”, “red” ] }</p>
<p> db.inventory.find( { size: {  w: 21, h: 14, uom: “cm” } } ) # 无法匹配到文档</p>
</blockquote>
</li>
<li><p>匹配内嵌文档的字段：例如：</p>
<blockquote>
<p>db.inventory.find( { “size.uom”: “in” } )<br>{ “_id” : ObjectId(“5b9f683c0d8dc94502ef65be”), “item” : “notebook”, “qty” : 50, “status” : “A”, “size” : { “h” : 8.5, “w” : 11, “uom” : “in” }, “tags” : [ “red”, “blank” ] }<br>{ “_id” : ObjectId(“5b9f683c0d8dc94502ef65bf”), “item” : “paper”, “qty” : 100, “status” : “D”, “size” : { “h” : 8.5, “w” : 11, “uom” : “in” }, “tags” : [ “red”, “blank”, “plain” ] }</p>
</blockquote>
</li>
<li><p>匹配数组中的元素：例如：</p>
<blockquote>
<p>db.inventory.find( { tags: “white” } )<br>{ “_id” : ObjectId(“5b9f69840d8dc94502ef65c2”), “item” : “jox”, “qtx” : 30, “status” : “D”, “size” : { “h” : 20, “w” : 31, “uom” : “cm” }, “tags” : [ “white”, “blue” ] }</p>
</blockquote>
</li>
<li><p>精确匹配数组：例如：</p>
<blockquote>
<p>db.inventory.find( { tags: [“red”, “blank”] } )<br>{ “_id” : ObjectId(“5b9f683c0d8dc94502ef65be”), “item” : “notebook”, “qty” : 50, “status” : “A”, “size” : { “h” : 8.5, “w” : 11, “uom” : “in” }, “tags” : [ “red”, “blank” ] }</p>
</blockquote>
</li>
</ul>
<h2 id="2-5-索引"><a href="#2-5-索引" class="headerlink" title="2.5. 索引"></a>2.5. 索引</h2><ul>
<li><p>创建唯一索引：</p>
<blockquote>
<p>db.products.createIndex({slug: 1}, {unique: true})</p>
</blockquote>
</li>
</ul>
<h1 id="附录-基本命令"><a href="#附录-基本命令" class="headerlink" title="附录. 基本命令"></a>附录. 基本命令</h1><ol start="0">
<li><p>命令：help</p>
<p>作用：显示帮助文档</p>
</li>
<li><p>命令：db</p>
<p>作用：显示当前使用的数据库</p>
</li>
<li><p>命令：use <database></database></p>
<p>作用：切换数据库，可以切换到一个不存在的数据库，首次在数据库中存储数据时，例如通过创建集合，MongoDB会创建数据库。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use myNewDatabase</span><br><span class="line">db.myCollection.insertOne(&#123;x: 1&#125;)</span><br></pre></td></tr></table></figure>
<p>在执行insertOne操作时，MongoDB会自动创建数据库<code>myNewDatabase</code>和集合<code>myCollection</code></p>
<p>db指向当前数据库，myCollection是集合的名称</p>
<p>如果mongo不接受一个集合的名称，你可以使用<code>db.getCollection()</code>来代替，例如：当一个集合的名称包含空格或横线，以数字开头或者跟内置的方法冲突</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.getCollection(&quot;3 test&quot;).find()</span><br><span class="line">db.getCollection(&quot;3-test&quot;).find()</span><br><span class="line">db.getCollection(&quot;stats&quot;).find()</span><br></pre></td></tr></table></figure>
</li>
<li><p>命令：show dbs</p>
<p>作用：列出当前可用的数据库</p>
</li>
<li><p>命令：show collections</p>
<p>作用：显示当前数据库的所有集合</p>
</li>
<li><p>命令：db.collection_name.find() 或db.collection_name.find({})</p>
<p>作用：列出集合中的所有文档</p>
</li>
</ol>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/MongoDB/" rel="tag"># MongoDB</a>
          
        </div>
      

      
      
      

      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">宁静致远</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-安装"><span class="nav-number">1.</span> <span class="nav-text">1. 安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-安装"><span class="nav-number">1.1.</span> <span class="nav-text">1.1. 安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-启动-amp-停止"><span class="nav-number">1.2.</span> <span class="nav-text">1.2. 启动&amp;停止</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-基本使用"><span class="nav-number">2.</span> <span class="nav-text">2. 基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-连接数据库"><span class="nav-number">2.1.</span> <span class="nav-text">2.1. 连接数据库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-创建数据库"><span class="nav-number">2.2.</span> <span class="nav-text">2.2. 创建数据库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-创建用户"><span class="nav-number">2.3.</span> <span class="nav-text">2.3. 创建用户</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-文档操作"><span class="nav-number">2.4.</span> <span class="nav-text">2.4. 文档操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-1-插入文档"><span class="nav-number">2.4.1.</span> <span class="nav-text">2.4.1. 插入文档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-2-查询文档"><span class="nav-number">2.4.2.</span> <span class="nav-text">2.4.2. 查询文档</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-索引"><span class="nav-number">2.5.</span> <span class="nav-text">2.5. 索引</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#附录-基本命令"><span class="nav-number">3.</span> <span class="nav-text">附录. 基本命令</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">宁静致远</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.4.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.1"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
